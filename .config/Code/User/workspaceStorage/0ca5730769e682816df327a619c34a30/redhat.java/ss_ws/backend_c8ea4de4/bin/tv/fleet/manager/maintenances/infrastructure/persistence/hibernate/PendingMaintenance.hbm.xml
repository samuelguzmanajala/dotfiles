<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>

    <class name="tv.fleet.manager.maintenances.domain.PendingMaintenance" table="pending_maintenance">
        <composite-id name="id" class="tv.fleet.manager.shared.domain.MaintenanceId" access="field">
            <key-property name="value" column="id" type="string" length="36" access="field" />
        </composite-id>

        <component name="concept" class="tv.fleet.manager.maintenances.domain.MaintenanceConcept" access="field">
            <property name="value" column="concept" type="string" access="field" />
        </component>

        <component name="dueDate" class="tv.fleet.manager.maintenances.domain.MaintenanceDueDate" access="field">
            <property name="value" column="due_date" type="string" access="field" />
        </component>

        <component name="vehicleId" class="tv.fleet.manager.vehicles.domain.VehicleId" access="field">
            <property name="value" column="vehicle_id" type="string" access="field" />
        </component>

        <component name="type" class="tv.fleet.manager.maintenances.domain.MaintenanceType" access="field">
            <property name="value" column="type" type="string" access="field" />
        </component>

        <set name="items" table="maintenance_item" cascade="all-delete-orphan" access="field">
            <key column="maintenance_id" />
            <one-to-many class="tv.fleet.manager.shared.domain.MaintenanceItem" />
        </set>

        <component name="recurrence" class="tv.fleet.manager.maintenances.domain.MaintenanceRecurrence" access="field" unique="true">
            <property name="type" column="recurrence" type="string" access="field" />
            <property name="intervalTime" column="time_interval" type="integer" access="field" />
            <property name="timeUnit" column="time_unit" type="string" access="field" />
            <property name="intervalKilometers" column="kilometer_interval" type="integer" access="field" />
        </component>

        <component name="estimatedDuration" class="tv.fleet.manager.maintenances.domain.EstimatedDuration" access="field">
            <property name="value" column="estimated_duration" type="integer" access="field" />
        </component>
    </class>


</hibernate-mapping>